import { KanbanSwimLane, OrchestratorTask, AgentInstance, AgentTeam, Pipeline, PipelineRun, FavouriteFolder, OrganizationUnit, Guild, GuildKnowledge, AgentMessage, ChatConversation, ConversationEntry, AgentProfileStats, TaskStatusHistoryEntry, TaskComment } from './types';
export declare class Database {
    private db;
    private dbPath;
    private saveTimer;
    constructor(dbPath: string);
    initialize(): Promise<void>;
    private saveToDisk;
    private scheduleSave;
    private migrate;
    /** Move old **Auto-close session summary:** from task description to input. */
    private migrateAutoCloseSummary;
    private mapRows;
    private queryAll;
    private queryOne;
    private run;
    saveSwimLane(lane: KanbanSwimLane): void;
    deleteSwimLane(id: string): void;
    getAllSwimLanes(): KanbanSwimLane[];
    getSwimLane(id: string): KanbanSwimLane | undefined;
    private rowToSwimLane;
    saveFavouriteFolder(f: FavouriteFolder): void;
    deleteFavouriteFolder(id: string): void;
    getAllFavouriteFolders(): FavouriteFolder[];
    private rowToFavouriteFolder;
    saveTask(task: OrchestratorTask): void;
    deleteTask(id: string): void;
    getAllTasks(): OrchestratorTask[];
    getTask(id: string): OrchestratorTask | undefined;
    getTasksBySwimLane(swimLaneId: string): OrchestratorTask[];
    getSubtasks(parentId: string): OrchestratorTask[];
    private getSubtaskIds;
    private getDependsOnIds;
    private rowToTask;
    addStatusHistory(entry: TaskStatusHistoryEntry): void;
    getStatusHistory(taskId: string): TaskStatusHistoryEntry[];
    addComment(comment: TaskComment): void;
    deleteComment(commentId: string): void;
    getComments(taskId: string): TaskComment[];
    saveTags(taskId: string, tags: string[]): void;
    getTags(taskId: string): string[];
    saveAgent(agent: AgentInstance): void;
    deleteAgent(id: string): void;
    getAllAgents(): AgentInstance[];
    getAgent(id: string): AgentInstance | undefined;
    private rowToAgent;
    saveTeam(team: AgentTeam): void;
    deleteTeam(id: string): void;
    getAllTeams(): AgentTeam[];
    getTeam(id: string): AgentTeam | undefined;
    private getTeamAgentIds;
    private rowToTeam;
    savePipeline(pipeline: Pipeline): void;
    deletePipeline(id: string): void;
    getAllPipelines(): Pipeline[];
    getPipeline(id: string): Pipeline | undefined;
    private rowToPipeline;
    savePipelineRun(run: PipelineRun): void;
    deletePipelineRun(id: string): void;
    getAllPipelineRuns(): PipelineRun[];
    getPipelineRun(id: string): PipelineRun | undefined;
    private rowToPipelineRun;
    saveOrgUnit(unit: OrganizationUnit): void;
    deleteOrgUnit(id: string): void;
    getAllOrgUnits(): OrganizationUnit[];
    getOrgUnit(id: string): OrganizationUnit | undefined;
    private getOrgUnitMemberIds;
    private rowToOrgUnit;
    saveGuild(guild: Guild): void;
    deleteGuild(id: string): void;
    getAllGuilds(): Guild[];
    getGuild(id: string): Guild | undefined;
    addGuildKnowledge(guildId: string, knowledge: GuildKnowledge): void;
    private getGuildMemberIds;
    private getGuildKnowledge;
    private rowToGuild;
    saveAgentMessage(msg: AgentMessage): void;
    getAgentMessages(agentId: string, limit?: number): AgentMessage[];
    getAllAgentMessages(limit?: number): AgentMessage[];
    markMessageRead(messageId: string): void;
    private rowToAgentMessage;
    saveConversation(conv: ChatConversation): void;
    deleteConversation(id: string): void;
    getAllConversations(): ChatConversation[];
    saveConversationMessage(conversationId: string, entry: ConversationEntry): void;
    getConversationMessages(conversationId: string): ConversationEntry[];
    private rowToConversation;
    getAgentProfileStats(agentId: string): AgentProfileStats | undefined;
    getAllAgentProfileStats(): AgentProfileStats[];
    close(): void;
}
//# sourceMappingURL=database.d.ts.map